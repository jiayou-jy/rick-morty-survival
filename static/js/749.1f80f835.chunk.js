"use strict";(self.webpackChunkcreate_react_app_intro_typescript=self.webpackChunkcreate_react_app_intro_typescript||[]).push([[749],{749:function(t,e,n){n.r(e),n.d(e,{default:function(){return m}});var r=n(861),a=n(885),i=n(757),c=n.n(i),s=n(791),u=n(470),o=n(168),l=n(184),d=function(t){if(!t)return null;var e=t.datum,n=e.name,r=e.status,a=e.species,i=e.gender,c=e.image,s=e.location,u=e.episode;return(0,l.jsxs)("div",{className:"details",children:[(0,l.jsx)("h2",{children:n}),(0,l.jsx)("div",{className:"image-container",children:c?(0,l.jsx)("img",{src:c,alt:n}):null}),(0,l.jsxs)("h3",{children:["Status:",r]}),(0,l.jsxs)("h3",{children:["Species: ",a]}),(0,l.jsxs)("h3",{children:["Gender: ",i]}),(0,l.jsxs)("h3",{children:["Location: ",null===s||void 0===s?void 0:s.name]}),(0,l.jsxs)("h3",{children:["Episodes: ",null===u||void 0===u?void 0:u.length]})]})},f=function(t){var e=t.data,n=t.loading,r=(t.category,(0,s.useRef)(null)),i=(0,s.useState)(500),c=(0,a.Z)(i,2),u=c[0],f=c[1],h=(0,s.useState)(500),p=(0,a.Z)(h,2),m=p[0],g=p[1],x=(0,s.useState)([]),v=(0,a.Z)(x,2),j=(v[0],v[1]),S=(0,s.useState)(),w=(0,a.Z)(S,2),y=w[0],b=w[1],k=(0,s.useState)(!1),Z=(0,a.Z)(k,2),_=Z[0],E=Z[1];function N(){var t=window.innerWidth-250,e=window.innerHeight-100;f(t),g(e)}return(0,s.useEffect)((function(){if(!e||0===e.length||!r.current)return;N();var t=o.Ys(r.current),n=Array.from(o.ruo(e,(function(t){return t.species})),(function(t){var e=(0,a.Z)(t,2);return{name:e[0],children:e[1]}})),i=function(t,e,n){var r=o.bT9(t).sum((function(t){return 1}));return o.P2p().size([e,n]).padding(4)(r).leaves()}({name:"Root",children:n},u,m);j(i);var c=n.map((function(t){return t.name}));t.select("defs").selectAll("pattern").data(i.filter((function(t){return t.data.image}))).attr("id",(function(t){return String(t.data.id)})).attr("patternUnits","objectBoundingBox").attr("width",1).attr("height",1).select("image").attr("href",(function(t){return String(t.data.image)})).attr("x",0).attr("y",0).attr("width",(function(t){return 2*t.r})).attr("height",(function(t){return 2*t.r})),o.Ys(".canvas").selectAll("circle").data(i).join("circle").attr("class","bubble").attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})).attr("fill",(function(t){return t.data.image?"url(#"+String(t.data.id)+")":"#fff"})).attr("fill-opacity",(function(t){return"Dead"===t.data.status?"0.3":"1"})).attr("stroke",(function(t){return function(t,e){var n=o.PKp().domain(e).range(o.Cn1);return String(n(t))}(String(t.data.species),c)})).transition().delay((function(t,e){return 500*Math.random()})).duration(750).attrTween("r",(function(t){return function(t){var e=o.sXR(0,t);return function(t){return String(e(t))}}(t.r)}))}),[e,u,m]),(0,s.useEffect)((function(){o.Ys(".canvas").selectAll("circle").on("click",(function(t,e){b(e.data),E(!_),o.Ys(t.target).style("stroke-width",(function(){return _?"2px":"6px"}))}))})),(0,s.useEffect)((function(){return window.addEventListener("resize",N),function(){return window.removeEventListener("resize",N)}}),[]),n?(0,l.jsx)("h2",{children:"scanning..."}):(0,l.jsxs)("div",{className:"chart-container",children:[(0,l.jsxs)("svg",{className:"chart",width:u,height:m,ref:r,children:[(0,l.jsx)("defs",{children:e.map((function(t){return(0,l.jsx)("pattern",{className:"bg_img",children:(0,l.jsx)("image",{})},t.id)}))}),(0,l.jsx)("g",{className:"canvas"})]}),y&&_?(0,l.jsx)(d,{datum:y}):null]})},h={},p=["any","alive","dead","unknown"],m=function(){var t=(0,s.useState)("all"),e=(0,a.Z)(t,2),n=e[0],i=e[1],o=(0,s.useState)("alive"),d=(0,a.Z)(o,2),m=d[0],g=d[1],x=(0,s.useState)([]),v=(0,a.Z)(x,2),j=v[0],S=v[1],w=(0,s.useState)("species"),y=(0,a.Z)(w,2),b=y[0],k=(y[1],(0,s.useState)(!0)),Z=(0,a.Z)(k,2),_=Z[0],E=Z[1],N=(0,u.useErrorHandler)(),C="".concat(n,"_").concat(m);function L(){return A.apply(this,arguments)}function A(){return(A=(0,r.Z)(c().mark((function t(){var e,r,a,i,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e="https://rickandmortyapi.com/api/character/",r=[],"all"!==n&&(e+="?name=".concat(n)),"any"!==m&&(e+="all"===n?"?status=".concat(m):"&status=".concat(m));case 4:return t.next=6,fetch(e);case 6:if(!(i=t.sent).ok){t.next=16;break}return t.next=10,i.json();case 10:s=t.sent,r=r.concat(s.results),a=s.info,e=a.next,t.next=17;break;case 16:return t.abrupt("return",Promise.reject(i).catch(N));case 17:if(a.next){t.next=4;break}case 18:h[C]=r||[],S(r),E(!1);case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,s.useEffect)((function(){h[C]?S(h[C]):L()}),[]),(0,l.jsxs)("div",{className:"search-params",children:[(0,l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),E(!0),L()},children:[(0,l.jsxs)("label",{htmlFor:"name",children:["Name",(0,l.jsx)("input",{id:"name",value:n,onChange:function(t){return i(t.target.value.toLocaleLowerCase())},placeholder:"name"})]}),(0,l.jsxs)("label",{htmlFor:"status",children:["Status",(0,l.jsx)("select",{id:"status",value:m,onChange:function(t){return g(t.target.value)},onBlur:function(t){return g(t.target.value)},children:p.map((function(t){return(0,l.jsx)("option",{value:t,onChange:function(e){return g(t)},onBlur:function(e){return g(t)},children:t},t)}))})]}),(0,l.jsx)("button",{children:"Get Schwifty!"})]}),(0,l.jsx)(f,{data:j,loading:_,category:b})]})}}}]);
//# sourceMappingURL=749.1f80f835.chunk.js.map